{"ast":null,"code":"var _jsxFileName = \"/Users/makbuk/Desktop/ kata/Movies/src/components/FilmCard/FilmCard.jsx\";\nimport React, { Component } from 'react';\nimport { Card, Rate, Spin, Tag } from 'antd';\nimport { format } from 'date-fns';\nimport './FilmCard.scss';\nimport ColorRate from '../ColorRate';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cardBody = {\n  padding: 0,\n  display: 'flex',\n  flexDirection: 'row'\n};\nconst spinStyle = {\n  justifyContent: 'center',\n  display: 'flex',\n  alignItems: 'center',\n  height: '100%'\n};\nexport default class FilmCard extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      starValue: 0,\n      img: null\n    };\n    this.setStarValue = e => {\n      this.setState({\n        starValue: e\n      });\n      let {\n        id: filmId\n      } = this.props;\n      let ratedFilms = JSON.parse(localStorage.getItem('ratedFilms')) || [];\n      let film = ratedFilms.find(e => e.id === filmId);\n      if (e) {\n        if (!film) ratedFilms.push({\n          id: filmId,\n          rate: e\n        });else film.rate = e;\n      } else {\n        if (film) ratedFilms.splice(ratedFilms.indexOf(film), 1);\n      }\n      localStorage.setItem('ratedFilms', JSON.stringify(ratedFilms));\n    };\n  }\n  render() {\n    let {\n      rate,\n      name,\n      date,\n      description,\n      poster,\n      tags,\n      id\n    } = this.props;\n    let film = (JSON.parse(localStorage.getItem('ratedFilms')) || []).find(e => e.id === id);\n    let image = new Image();\n    image.src = poster;\n    image.onload = () => {\n      this.setState({\n        img: image\n      });\n    };\n    const imageLoader = this.state.img ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: poster,\n      alt: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 42\n    }, this) : /*#__PURE__*/_jsxDEV(Spin, {\n      style: spinStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 76\n    }, this);\n    return /*#__PURE__*/_jsxDEV(Card, {\n      className: \"card\",\n      bodyStyle: cardBody,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card__image\",\n        children: imageLoader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card__content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card__content__name\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"card__content__name--title\",\n            children: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ColorRate, {\n            rate: rate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card__content__date\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: date ? format(new Date(date), 'MMMM d, u') : 'none'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card__content__tags\",\n          children: tags.map(el => /*#__PURE__*/_jsxDEV(Tag, {\n            children: el.name\n          }, el.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card__content__description\",\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rate, {\n          className: \"card__content__stars\",\n          value: this.state.starValue || (film ? film.rate : 0),\n          count: 10,\n          allowHalf: true,\n          allowClear: true,\n          onChange: this.setStarValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","Card","Rate","Spin","Tag","format","ColorRate","cardBody","padding","display","flexDirection","spinStyle","justifyContent","alignItems","height","FilmCard","state","starValue","img","setStarValue","e","setState","id","filmId","props","ratedFilms","JSON","parse","localStorage","getItem","film","find","push","rate","splice","indexOf","setItem","stringify","render","name","date","description","poster","tags","image","Image","src","onload","imageLoader","Date","map","el"],"sources":["/Users/makbuk/Desktop/ kata/Movies/src/components/FilmCard/FilmCard.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Card, Rate, Spin, Tag } from 'antd';\nimport { format } from 'date-fns';\n\nimport './FilmCard.scss';\nimport ColorRate from '../ColorRate';\n\nconst cardBody = {\n  padding: 0,\n  display: 'flex',\n  flexDirection: 'row',\n};\n\nconst spinStyle = {\n  justifyContent: 'center',\n  display: 'flex',\n  alignItems: 'center',\n  height: '100%',\n};\n\nexport default class FilmCard extends Component {\n  state = {\n    starValue: 0,\n    img: null,\n  };\n\n  setStarValue = (e) => {\n    this.setState({ starValue: e });\n    let { id: filmId } = this.props;\n    let ratedFilms = JSON.parse(localStorage.getItem('ratedFilms')) || [];\n    let film = ratedFilms.find((e) => e.id === filmId);\n    if (e) {\n      if (!film) ratedFilms.push({ id: filmId, rate: e });\n      else film.rate = e;\n    } else {\n      if (film) ratedFilms.splice(ratedFilms.indexOf(film), 1);\n    }\n    localStorage.setItem('ratedFilms', JSON.stringify(ratedFilms));\n  };\n\n  render() {\n    let { rate, name, date, description, poster, tags, id } = this.props;\n    let film = (JSON.parse(localStorage.getItem('ratedFilms')) || []).find((e) => e.id === id);\n    let image = new Image();\n    image.src = poster;\n    image.onload = () => {\n      this.setState({ img: image });\n    };\n\n    const imageLoader = this.state.img ? <img src={poster} alt={name} /> : <Spin style={spinStyle} />;\n    return (\n      <Card className=\"card\" bodyStyle={cardBody}>\n        <div className=\"card__image\">{imageLoader}</div>\n        <div className=\"card__content\">\n          <div className=\"card__content__name\">\n            <h3 className=\"card__content__name--title\">{name}</h3>\n            <ColorRate rate={rate} />\n          </div>\n          <div className=\"card__content__date\">\n            <span>{date ? format(new Date(date), 'MMMM d, u') : 'none'}</span>\n          </div>\n          <div className=\"card__content__tags\">\n            {tags.map((el) => (\n              <Tag key={el.id}>{el.name}</Tag>\n            ))}\n          </div>\n          <p className=\"card__content__description\">{description}</p>\n          <Rate\n            className=\"card__content__stars\"\n            value={this.state.starValue || (film ? film.rate : 0)}\n            count={10}\n            allowHalf\n            allowClear\n            onChange={this.setStarValue}\n          />\n        </div>\n      </Card>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}